"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useSearchBarAnalytics = void 0;
const useAnalytics_1 = require("./useAnalytics");
const search_headless_react_1 = require("@yext/search-headless-react");
function useSearchBarAnalytics() {
    const analytics = (0, useAnalytics_1.useAnalytics)();
    const verticalKey = (0, search_headless_react_1.useSearchState)(state => state.vertical.verticalKey);
    const queryId = (0, search_headless_react_1.useSearchState)(state => state.query.queryId);
    const reportAutocompleteEvent = (suggestedSearchText) => {
        analytics === null || analytics === void 0 ? void 0 : analytics.report(Object.assign(Object.assign({ type: 'AUTO_COMPLETE_SELECTION' }, (queryId && { queryId })), { suggestedSearchText }));
    };
    const reportSearchClearEvent = () => {
        if (!queryId) {
            console.error('Unable to report a search clear event. Missing field: queryId.');
            return;
        }
        analytics === null || analytics === void 0 ? void 0 : analytics.report({
            type: 'SEARCH_CLEAR_BUTTON',
            queryId,
            verticalKey
        });
    };
    const reportAnalyticsEvent = (analyticsEventType, suggestedSearchText) => {
        if (!analytics) {
            return;
        }
        analyticsEventType === 'AUTO_COMPLETE_SELECTION'
            ? reportAutocompleteEvent(suggestedSearchText || '')
            : reportSearchClearEvent();
    };
    return reportAnalyticsEvent;
}
exports.useSearchBarAnalytics = useSearchBarAnalytics;
//# sourceMappingURL=useSearchBarAnalytics.js.map