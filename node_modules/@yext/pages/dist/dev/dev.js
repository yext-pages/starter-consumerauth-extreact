import { createServer } from "./server/server.js";
import open from "open";
import { devServerPort } from "./server/middleware/constants.js";
const handler = async ({
  scope,
  local,
  "prod-url": useProdURLs,
  "open-browser": openBrowser
}) => {
  await createServer(!local, !!useProdURLs, scope);
  if (!openBrowser) {
    return;
  }
  await open(`http://localhost:${devServerPort}/`);
};
const devCommandModule = {
  command: "dev",
  describe: "Runs a custom local development server that is backed by Vite",
  builder: (yargs) => {
    return yargs.option("local", {
      describe: "Disables dynamically generated test data",
      type: "boolean",
      demandOption: false
    }).option("scope", {
      describe: "The subfolder to scope the served templates from",
      type: "string",
      demandOption: false
    }).option("prod-url", {
      describe: "Use production URLs, instead of /[template-name]/[external-id]",
      type: "boolean",
      demandOption: false,
      default: true
    }).option("open-browser", {
      describe: "Automatically opens the browser on server start-up",
      type: "boolean",
      demandOption: false,
      default: true
    });
  },
  handler
};
export {
  devCommandModule
};
